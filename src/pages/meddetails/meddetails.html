<ion-content padding>
    <ion-navbar>
        <ion-title>Home
            < Medication < New medication</ion-title>
    </ion-navbar>
    <ion-list>
        <form (ngSubmit)="saveMedicine()">
            <img *ngIf="!todo.image" src="assets/icon/camera.ico" (click)="runCamera()">
            <img [src]="todo.image" *ngIf="todo.image" (click)="runCamera()" />
            <ion-item>
                <ion-label floating>Description</ion-label>
                <ion-input name="med_description" type="text" [(ngModel)]="todo.description"></ion-input>
            </ion-item>
            <br>
            <ion-item>
                <ion-label floating>Dosages</ion-label>
                <ion-input name="med_dosages" type="number" [(ngModel)]="todo.dosages"></ion-input>
            </ion-item>

            <ion-item>
                <ion-label>Time to take medicine</ion-label>
                <ion-datetime name="med_datetime" displayFormat="HH:mm" [(ngModel)]="todo.time">
                </ion-datetime>
            </ion-item>

            <ion-item>
                <ion-label>Alarm</ion-label>
                <ion-checkbox name="med_alarm" [(ngModel)]="todo.alarm"></ion-checkbox>
            </ion-item>

            <ion-item>
                <ion-label>Caregiver</ion-label>
                <ion-select name="med_caregiver" [(ngModel)]="todo.caregiver_id">
                    <ion-option *ngFor="let caregiver of caregivers" [value]="caregiver.id">{{caregiver.name}}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item>
                <ion-label floating>Insurance details</ion-label>
                <ion-input name="med_insurance" type="text" [(ngModel)]="todo.insurance"></ion-input>
            </ion-item>

            <button ion-button medium large block type="submit">Save</button>
        </form><br><br>
        <button *ngIf="todo.caregiver_id" ion-button large block (click)="contactCaregiver()">Contact caregiver</button>
        <button *ngIf="todo.id" color="danger" large block ion-button (click)="deleteMedicine()">Delete</button><br><br>
        <button ion-button large block (click)="testNotification()">Test alarm</button>
    </ion-list>

</ion-content>